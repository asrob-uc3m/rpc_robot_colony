/**
 * @file    UltrasonicSensor.cpp
 * @brief   UltrasonicSensor class implementation
 *
 * @author  María Blázquez Partido <maria.b.partido@alumnos.uc3m.es>
 * @date    2014-08
 *
 *  -- Asociacion de Robotica, University Carlos III of Madrid
 */

#include "UltrasonicSensor.h"

/////////////////////////////////////////////////////////////////////////////////////////////////////////
UltrasonicSensor::UltrasonicSensor()
{
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////
UltrasonicSensor::UltrasonicSensor(int echo_pin,int trigger_pin)
{
    set_echo(echo_pin);
    set_trigger(trigger_pin);
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////
UltrasonicSensor::UltrasonicSensor(const UltrasonicSensor & us)
{
    _echo_pin=us._echo_pin;
    _trigger_pin=us._trigger_pin;
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////
int UltrasonicSensor::get_echo()
{
    return _echo_pin;
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////
int UltrasonicSensor::get_trigger()
{
    return _trigger_pin;
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////
void UltrasonicSensor::set_echo(int echo_pin)
{
    _echo_pin=echo_pin;
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////
void UltrasonicSensor::set_trigger(int trigger_pin)
{
    _trigger_pin=trigger_pin;
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////
float UltrasonicSensor::get_distance()
{
    Ultrasonic US(_trigger_pin,_echo_pin);
    long microsec = US.timing();
    float distance = US.CalcDistance(microsec,Ultrasonic::CM);
    return(distance);
}
